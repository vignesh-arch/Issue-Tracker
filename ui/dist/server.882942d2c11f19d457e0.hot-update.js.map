{"version":3,"sources":["webpack:///./src/SignInNavItem.jsx"],"names":["SignInNavItem","React","Component","constructor","props","state","showing","disabled","user","signedIn","givenName","showModal","bind","hideModal","signIn","signOut","componentDidMount","clientId","window","ENV","GOOGLE_CLIENT_ID","gapi","load","auth2","getAuthInstance","init","client_id","plugin_name","then","setState","showError","googleUser","getBasicProfile","getGivenName","err","error","render","createElement","NavDropdown","title","id","MenuItem","onClick","Fragment","NavItem","Modal","keyboard","show","onHide","bsSize","Header","closeButton","Title","Body","Button","block","bsStyle","src","alt","Footer","withToast"],"mappings":"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","file":"server.882942d2c11f19d457e0.hot-update.js","sourcesContent":["import React from 'react';\nimport { MenuItem, Modal, NavDropdown, Button, NavItem } from 'react-bootstrap';\n\nimport withToast from './withToast.jsx'\n\nclass SignInNavItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showing: false,\n      disabled: true,\n      user: { signedIn: false, givenName: '' },\n    };\n    this.showModal = this.showModal.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n    this.signIn = this.signIn.bind(this);\n    this.signOut = this.signOut.bind(this);\n  }\n\n  componentDidMount() {\n    const clientId = window.ENV.GOOGLE_CLIENT_ID;\n    if (!clientId) return;\n    window.gapi.load('auth2', () => {\n      if (!window.gapi.auth2.getAuthInstance()) {\n        window.gapi.auth2.init({ client_id: clientId,plugin_name: \"vignesh\" }).then(() => {\n          this.setState({ disabled: false });\n        });\n      }\n    });\n  }\n\n  async signIn() {\n    this.hideModal();\n    const { showError } = this.props;\n    try {\n      const auth2 = window.gapi.auth2.getAuthInstance();\n      const googleUser = await auth2.signIn();\n      const givenName = googleUser.getBasicProfile().getGivenName();\n      this.setState({ user: { signedIn: true, givenName } });\n    } catch (err) {\n      showError(`Error Authenticating with Google :${err.error}`);\n    }\n  }\n\n  signOut() {\n    this.setState({ user: { signedIn: false, givenName: '' } });\n  }\n    \n  showModal() {\n    const clientId = window.ENV.GOOGLE_CLIENT_ID;\n    const { showError } = this.props;\n    if (!clientId) {\n        showError(`Client id not found in Environmental variable`);\n        return;\n    }\n    this.setState({ showing: true });\n  }\n\n  hideModal() {\n    this.setState({ showing: false });\n  }\n\n  render() {\n    const { showing,disabled, user } = this.state;\n    if (user.signedIn) {\n      return (\n        <NavDropdown title={user.givenName} id='user'>\n          <MenuItem onClick={this.signOut}>Sign Out</MenuItem>\n        </NavDropdown>\n      );\n    }\n    return (\n      <React.Fragment>\n        <NavItem onClick={this.showModal}>Sign In</NavItem>\n        <Modal keyboard show={showing} onHide={this.hideModal} bsSize='sm'>\n          <Modal.Header closeButton>\n            <Modal.Title>Sign In</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <Button\n              block\n              bsStyle='primary'\n              disabled={disabled}\n              onClick={this.signIn}\n            >\n              <img\n                src=\"./assets/sign_in_img.png\"\n                alt=\"Sign In\"\n              />\n            </Button>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button bsStyle='link' onClick={this.hideModal}>\n              Cancel\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withToast(SignInNavItem);"],"sourceRoot":""}